(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[861],{28:(e,s,t)=>{"use strict";t.d(s,{t:()=>a});let a="http://localhost:3000"},167:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(5155),r=t(2619),n=t.n(r),i=t(63),l=t(2115);t(1554);let o=function(){let[e,s]=(0,l.useState)(()=>localStorage.getItem("theme")||"dark"),[t,r]=(0,l.useState)("light"===e?"LocShare":"AnonShare"),o=(0,i.useRouter)();return(0,l.useEffect)(()=>{r("light"===e?"LocShare":"AnonShare"),document.body.className=e,localStorage.setItem("theme",e)},[e]),(0,a.jsx)("header",{className:"header",children:(0,a.jsxs)("div",{className:"container header-container",children:[(0,a.jsx)(n(),{href:"/",className:"logo",onDoubleClick:()=>{"dark"===e?(s("light"),r("LocShare")):(s("dark"),r("AnonShare"))},children:t}),(0,a.jsxs)("div",{className:"header-buttons",children:[(0,a.jsx)("button",{className:"header-btn",onClick:s=>{s.preventDefault(),"light"===e?o.push("/locshare"):o.push("/share")},children:"Send Securely"}),(0,a.jsx)("button",{className:"header-btn light",onClick:e=>{e.preventDefault(),o.push("/access")},children:"Safely Access Files"})]})]})})}},1554:()=>{},1847:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(2115);let r=e=>{let s=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase());return s.charAt(0).toUpperCase()+s.slice(1)},n=function(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return s.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,s)=>{let{color:t="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,iconNode:h,...p}=e;return(0,a.createElement)("svg",{ref:s,...i,width:r,height:r,stroke:t,strokeWidth:o?24*Number(l)/Number(r):l,className:n("lucide",c),...p},[...h.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(d)?d:[d]])}),o=(e,s)=>{let t=(0,a.forwardRef)((t,i)=>{let{className:o,...c}=t;return(0,a.createElement)(l,{ref:i,iconNode:s,className:n("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),o),...c})});return t.displayName=r(e),t}},1965:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(5155);t(3448);let r=function(){return(0,a.jsx)("footer",{className:"footer",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"footer-content",children:[(0,a.jsxs)("div",{className:"footer-logo-section",children:[(0,a.jsx)("div",{className:"footer-logo",children:"AnonShare"}),(0,a.jsx)("p",{className:"footer-tagline",children:"Stay Connected with Us"})]}),(0,a.jsxs)("div",{className:"footer-links",children:[(0,a.jsxs)("div",{className:"footer-column",children:[(0,a.jsx)("h3",{children:"LINKS"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Privacy Policy"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Terms of Use"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Support Center"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Feedback"})})]})]}),(0,a.jsxs)("div",{className:"footer-column",children:[(0,a.jsx)("h3",{children:"RESOURCES"}),(0,a.jsxs)("ul",{children:[(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Contact Us"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"About Us"})}),(0,a.jsx)("li",{children:(0,a.jsx)("a",{href:"#",children:"Latest Updates"})})]})]})]})]}),(0,a.jsxs)("div",{className:"footer-bottom",children:[(0,a.jsx)("p",{className:"copyright",children:"\xa9 Copyright 2025"}),(0,a.jsxs)("div",{className:"subscribe",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email"}),(0,a.jsx)("button",{children:"Subscribe"})]})]})]})})}},3448:()=>{},4310:()=>{},5511:(e,s,t)=>{Promise.resolve().then(t.bind(t,8483))},6983:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7910:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},8421:(e,s,t)=>{"use strict";t.d(s,{G7:()=>l,Gi:()=>r,PE:()=>i,Pd:()=>c,RY:()=>n,Yn:()=>h,v:()=>p,vR:()=>o,zW:()=>d});var a=t(28);let r=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3600,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=new FormData;return e&&i.append("file",e),n&&i.append("encryptedText",n),i.append("expireSeconds",s),t&&i.append("password",t),r&&i.append("maxDownloads",r),(await fetch("".concat(a.t,"/upload"),{method:"POST",body:i})).json()},n=async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=s?"?password=".concat(encodeURIComponent(s)):"",r=await fetch("".concat(a.t,"/session-info/").concat(e).concat(t));if(!r.ok)throw Error("Session not found");return r.json()},i=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=s?"?password=".concat(encodeURIComponent(s)):"";window.location.href="".concat(a.t,"/download/").concat(e).concat(t)},l=async e=>(await fetch("".concat(a.t,"/endsession"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ownerToken:e})})).json(),o=async e=>{let s=await fetch("".concat(a.t,"/session-data/").concat(e));if(!s.ok)throw Error("Session not found or unauthorized");return s.json()},c=async function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=new FormData;e&&i.append("file",e),n&&i.append("encryptedText",n),i.append("port",s),t&&i.append("password",t),r&&i.append("maxDownloads",r);let l=await fetch("".concat(a.t,"/local-server/start"),{method:"POST",body:i});if(!l.ok)throw Error((await l.json()).error||"Failed to start local server");return l.json()},d=async e=>{let s=await fetch("".concat(a.t,"/local-server/stop"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({port:e})});if(!s.ok)throw Error((await s.json()).error||"Failed to stop local server");return s.json()},h=async e=>(await fetch("".concat(a.t,"/local-server/check-port/").concat(e))).json(),p=async e=>{let s=await fetch("".concat(a.t,"/local-server/stats/").concat(e));if(!s.ok)throw Error("Failed to get server stats");return s.json()}},8483:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>g});var a=t(5155),r=t(2115),n=t(2619),i=t.n(n),l=t(167),o=t(1965),c=t(1847);let d=(0,c.A)("file",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);var h=t(9715);let p=(0,c.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),m=(0,c.A)("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),x=(0,c.A)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);var u=t(6983),f=t(9708),j=t(7910),v=t(9867);t(4310);var w=t(8421),y=t(63);function g(){var e;let[s,t]=(0,r.useState)(3600),[n,c]=(0,r.useState)(""),[g,k]=(0,r.useState)(!1),[N,S]=(0,r.useState)(!1),[b,A]=(0,r.useState)(!1),[z,T]=(0,r.useState)(null),[C,E]=(0,r.useState)(!1),[M,I]=(0,r.useState)(""),P=(0,y.useParams)().accessCode,F=(0,y.useRouter)(),R=(0,r.useRef)(null),D=(0,r.useRef)(null);(0,r.useEffect)(()=>{"light"===(localStorage.getItem("theme")||"dark")&&F.push("/");let e=setInterval(()=>{"light"===(localStorage.getItem("theme")||"dark")&&F.push("/")},100);return()=>clearInterval(e)},[F]),(0,r.useEffect)(()=>P?(R.current&&clearInterval(R.current),(0,w.RY)(P).then(e=>{if(e.downloadLimitReached)return void F.push("/expired?reason=download-limit");k(e.passwordProtected),e.name&&T({name:e.name,size:e.size,mimeType:e.mimeType,isText:e.isText||!1});let s=new Date(e.expiresAt).getTime(),a=Math.floor((s-Date.now())/1e3);t(a>0?a:0),a>0&&(Date.now(),R.current=setInterval(()=>{let e=Math.floor((s-Date.now())/1e3);e<=0?(t(0),clearInterval(R.current)):t(e)},1e3))}).catch(e=>{console.error("Session fetch failed",e),t(0)}),()=>{R.current&&clearInterval(R.current)}):void alert("Invalid download session"),[P,F]),(0,r.useEffect)(()=>{if(P)return D.current=setInterval(async()=>{try{await (0,w.RY)(P,n)}catch(e){console.log("Session no longer valid, redirecting..."),F.push("/expired?reason=cancelled")}},3e3),()=>{D.current&&clearInterval(D.current)}},[P,n,F]);let L=e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60);return"".concat(s>0?"".concat(s,":"):"").concat(t.toString().padStart(2,"0"),":").concat((e%60).toString().padStart(2,"0"))},U=async e=>{e.preventDefault(),A(!0),I("");try{let e=await (0,w.RY)(P,n);if(e.downloadLimitReached)return void F.push("/expired?reason=download-limit");e.name?(T({name:e.name,size:e.size,mimeType:e.mimeType,isText:e.isText||!1}),S(!0),I("")):I("Incorrect password. Please try again.")}catch(e){console.error("Password verification failed",e),I("Incorrect password. Please try again.")}finally{A(!1)}},O=async()=>{if(P)if(z&&z.isText){E(!0);try{let e=await fetch("".concat("http://localhost:3000","/download/").concat(P,"?password=").concat(encodeURIComponent(n||"")));if(!e.ok){let s=await e.json();alert(s.error||"Failed to fetch message"),E(!1);return}let s=await e.json();sessionStorage.setItem("encrypted-text",s.encryptedText),sessionStorage.setItem("text-has-password",s.hasPassword?"true":"false"),sessionStorage.setItem("text-password",n||""),F.push("/text-viewer")}catch(e){console.error("Error fetching text:",e),alert("Failed to fetch message")}finally{E(!1)}}else{E(!0);try{(0,w.PE)(P,n),setTimeout(()=>{E(!1)},5e3)}catch(e){E(!1),console.error("Download failed:",e)}}};return 0===s?(0,a.jsxs)("div",{className:"download-page",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("main",{className:"download-container",children:(0,a.jsx)("div",{className:"download-card",children:(0,a.jsxs)("div",{className:"session-expired",children:[(0,a.jsx)(u.A,{size:60,className:"expired-icon"}),(0,a.jsx)("h1",{children:"Session Expired"}),(0,a.jsx)("p",{children:"This file sharing session is no longer available. The time has expired."}),(0,a.jsx)(i(),{href:"/",className:"home-btn",children:"Return to Home"})]})})}),(0,a.jsx)(o.A,{})]}):(0,a.jsxs)("div",{className:"download-page",children:[(0,a.jsx)(l.A,{}),(0,a.jsx)("main",{className:"download-container",children:(0,a.jsxs)("div",{className:"download-card",children:[(0,a.jsxs)("div",{className:"download-header",children:[(0,a.jsx)("h1",{children:"Download Files"}),(0,a.jsxs)("div",{className:"session-expiry",children:[(0,a.jsx)(u.A,{size:18}),(0,a.jsx)("span",{children:"Session expires in: "}),(0,a.jsx)("span",{className:"countdown",children:L(s)})]})]}),g&&!N?(0,a.jsxs)("div",{className:"password-protection",children:[(0,a.jsx)("div",{className:"protection-icon",children:(0,a.jsx)(f.A,{size:40})}),(0,a.jsx)("h2",{children:"Password Protected Files"}),(0,a.jsx)("p",{children:"These files are protected. Please enter the password to access them."}),(0,a.jsxs)("form",{onSubmit:U,className:"password-form",children:[(0,a.jsx)("input",{type:"password",placeholder:"Enter password",value:n,onChange:e=>{c(e.target.value),I("")},required:!0}),M&&(0,a.jsx)("div",{className:"error-message",style:{color:"red",marginTop:"10px",fontSize:"14px"},children:M}),(0,a.jsx)("button",{type:"submit",disabled:b||!n,children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"spinner"}),"Verifying..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.A,{size:18}),"Unlock Files"]})})]})]}):z?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"files-list",children:(0,a.jsxs)("div",{className:"file-item",children:[(0,a.jsxs)("div",{className:"file-info",children:[(0,a.jsx)("div",{className:"file-icon",children:(e=z.mimeType)?e.includes("pdf")?(0,a.jsx)(h.A,{size:24}):e.includes("image")?(0,a.jsx)(p,{size:24}):e.includes("video")?(0,a.jsx)(m,{size:24}):e.includes("zip")||e.includes("rar")||e.includes("tar")||e.includes("archive")?(0,a.jsx)(x,{size:24}):(0,a.jsx)(d,{size:24}):(0,a.jsx)(d,{size:24})}),(0,a.jsxs)("div",{className:"file-details",children:[(0,a.jsx)("div",{className:"file-name",children:z.name}),(0,a.jsx)("div",{className:"file-size",children:z.size})]})]}),(0,a.jsx)("div",{className:"file-actions",children:C?(0,a.jsxs)("div",{className:"downloading-state",children:[(0,a.jsx)("span",{className:"spinner"}),z.isText?"Loading message...":"Preparing download..."]}):(0,a.jsx)("button",{className:"download-btn",onClick:O,disabled:C,children:z.isText?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{size:18}),"View Message"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.A,{size:18}),"Download"]})})})]})}),(0,a.jsx)("div",{className:"download-all",children:(0,a.jsxs)("button",{className:"download-all-btn",onClick:()=>{P&&(0,w.PE)(P,n)},children:[(0,a.jsx)(v.A,{size:18}),"Download All Files"]})}),(0,a.jsx)("div",{className:"download-info",children:(0,a.jsxs)("p",{children:["Files ready for download. They will be available for ",L(s),"."]})})]}):(0,a.jsx)("div",{className:"loading-file",children:(0,a.jsx)("p",{children:"Loading file information..."})})]})}),(0,a.jsx)(o.A,{})]})}},9708:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]])},9715:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},9867:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])}},e=>{e.O(0,[195,785,176,441,255,358],()=>e(e.s=5511)),_N_E=e.O()}]);